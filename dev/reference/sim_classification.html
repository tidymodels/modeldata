<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate datasets — sim_classification • modeldata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate datasets — sim_classification"><meta name="description" content="These functions can be used to generate simulated data for supervised
(classification and regression) and unsupervised modeling applications."><meta property="og:description" content="These functions can be used to generate simulated data for supervised
(classification and regression) and unsupervised modeling applications."><meta name="robots" content="noindex"><script defer data-domain="modeldata.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">modeldata</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/modeldata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate datasets</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/modeldata/blob/main/R/simulations.R" class="external-link"><code>R/simulations.R</code></a></small>
      <div class="d-none name"><code>sim_classification.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions can be used to generate simulated data for supervised
(classification and regression) and unsupervised modeling applications.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_classification</span><span class="op">(</span></span>
<span>  num_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"caret"</span>,</span>
<span>  intercept <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>,</span>
<span>  num_linear <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  keep_truth <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_regression</span><span class="op">(</span></span>
<span>  num_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"sapp_2014_1"</span>,</span>
<span>  std_dev <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_truth <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_noise</span><span class="op">(</span></span>
<span>  <span class="va">num_samples</span>,</span>
<span>  <span class="va">num_vars</span>,</span>
<span>  cov_type <span class="op">=</span> <span class="st">"exchangeable"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  num_classes <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  cov_param <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_logistic</span><span class="op">(</span><span class="va">num_samples</span>, <span class="va">eqn</span>, correlation <span class="op">=</span> <span class="fl">0</span>, keep_truth <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_multinomial</span><span class="op">(</span></span>
<span>  <span class="va">num_samples</span>,</span>
<span>  <span class="va">eqn_1</span>,</span>
<span>  <span class="va">eqn_2</span>,</span>
<span>  <span class="va">eqn_3</span>,</span>
<span>  correlation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  keep_truth <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-num-samples">num_samples<a class="anchor" aria-label="anchor" href="#arg-num-samples"></a></dt>
<dd><p>Number of data points to simulate.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A character string for the simulation method. For
classification, the single current option is "caret". For regression,
values can be "sapp_2014_1", "sapp_2014_2", "van_der_laan_2007_1", or
"van_der_laan_2007_2". See Details below.</p></dd>


<dt id="arg-intercept">intercept<a class="anchor" aria-label="anchor" href="#arg-intercept"></a></dt>
<dd><p>The intercept for the linear predictor.</p></dd>


<dt id="arg-num-linear">num_linear<a class="anchor" aria-label="anchor" href="#arg-num-linear"></a></dt>
<dd><p>Number of diminishing linear effects.</p></dd>


<dt id="arg-keep-truth">keep_truth<a class="anchor" aria-label="anchor" href="#arg-keep-truth"></a></dt>
<dd><p>A logical: should the true outcome value be retained for
the data? If so, the column name is <code>.truth</code>.</p></dd>


<dt id="arg-std-dev">std_dev<a class="anchor" aria-label="anchor" href="#arg-std-dev"></a></dt>
<dd><p>Gaussian distribution standard deviation for residuals.
Default values are shown below in Details.</p></dd>


<dt id="arg-factors">factors<a class="anchor" aria-label="anchor" href="#arg-factors"></a></dt>
<dd><p>A single logical for whether the binary indicators should be
encoded as factors or not.</p></dd>


<dt id="arg-num-vars">num_vars<a class="anchor" aria-label="anchor" href="#arg-num-vars"></a></dt>
<dd><p>Number of noise predictors to create.</p></dd>


<dt id="arg-cov-type">cov_type<a class="anchor" aria-label="anchor" href="#arg-cov-type"></a></dt>
<dd><p>The multivariate normal correlation structure of the
predictors. Possible values are "exchangeable" and "toeplitz".</p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>A single character string for what type of independent outcome
should be simulated (if any). The default value of "none" produces no extra
columns. Using "classification" will generate a <code>class</code> column with
<code>num_classes</code> values, equally distributed. A value of "regression" results
in an <code>outcome</code> column that contains independent standard normal values.</p></dd>


<dt id="arg-num-classes">num_classes<a class="anchor" aria-label="anchor" href="#arg-num-classes"></a></dt>
<dd><p>When <code>outcome = "classification"</code>, the number of classes
to simulate.</p></dd>


<dt id="arg-cov-param">cov_param<a class="anchor" aria-label="anchor" href="#arg-cov-param"></a></dt>
<dd><p>A single numeric value for the exchangeable correlation
value or the base of the Toeplitz structure. See Details below.</p></dd>


<dt id="arg-eqn-eqn-eqn-eqn-">eqn, eqn_1, eqn_2, eqn_3<a class="anchor" aria-label="anchor" href="#arg-eqn-eqn-eqn-eqn-"></a></dt>
<dd><p>An R expression or  (one sided) formula that
only involves variables <code>A</code> and <code>B</code> that is used to compute the linear
predictor. External objects should not be used as symbols; see the examples
below on how to use external objects in the equations.</p></dd>


<dt id="arg-correlation">correlation<a class="anchor" aria-label="anchor" href="#arg-correlation"></a></dt>
<dd><p>A single numeric value for the correlation between variables
<code>A</code> and <code>B</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="specific-regression-and-classification-methods">Specific Regression and Classification methods<a class="anchor" aria-label="anchor" href="#specific-regression-and-classification-methods"></a></h3>


<p>These functions provide several supervised simulation methods (and one
unsupervised). Learn more by <code>method</code>:</p><div class="section">
<h4 id="method-caret-"><code>method = "caret"</code><a class="anchor" aria-label="anchor" href="#method-caret-"></a></h4>


<p>This is a simulated classification problem with two classes, originally
implemented in <code>caret::twoClassSim()</code> with all numeric predictors. The
predictors are simulated in different sets. First, two multivariate normal
predictors (denoted here as <code>two_factor_1</code> and <code>two_factor_2</code>) are created
with a correlation of about 0.65. They change the log-odds using main
effects and an interaction:</p>
<div class="sourceCode"><pre><code><span>  <span class="va">intercept</span> <span class="op">-</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">two_factor_1</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">two_factor_2</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">two_factor_1</span> <span class="op">*</span> <span class="va">two_factor_2</span> </span></code></pre></div>

<p>The intercept is a parameter for the simulation and can be used to control
the amount of class imbalance.</p>
<p>The second set of effects are linear with coefficients that alternate signs
and have a sequence of values between 2.5 and 0.25. For example, if there
were four predictors in this set, their contribution to the log-odds would
be</p>
<div class="sourceCode"><pre><code><span>  <span class="op">-</span><span class="fl">2.5</span> <span class="op">*</span> <span class="va">linear_1</span> <span class="op">+</span> <span class="fl">1.75</span> <span class="op">*</span> <span class="va">linear_2</span> <span class="op">-</span><span class="fl">1.00</span> <span class="op">*</span> <span class="va">linear_3</span> <span class="op">+</span> <span class="fl">0.25</span> <span class="op">*</span> <span class="va">linear_4</span></span></code></pre></div>

<p>(Note that these column names may change based on the value of <code>num_linear</code>).</p>
<p>The third set is a nonlinear function of a single predictor ranging between
<code>[0, 1]</code> called <code>non_linear_1</code> here:</p>
<div class="sourceCode"><pre><code><span>  <span class="op">(</span><span class="va">non_linear_1</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span> <span class="op">*</span> <span class="op">(</span><span class="va">non_linear_1</span> <span class="op">-</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> </span></code></pre></div>

<p>The fourth set of informative predictors are copied from one of Friedman's
systems and use two more predictors (<code>non_linear_2</code> and <code>non_linear_3</code>):</p>
<div class="sourceCode"><pre><code><span>  <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">non_linear_2</span> <span class="op">*</span> <span class="va">non_linear_3</span><span class="op">)</span> </span></code></pre></div>

<p>All of these effects are added up to model the log-odds.</p>
</div>

<div class="section">
<h4 id="method-sapp-"><code>method = "sapp_2014_1"</code><a class="anchor" aria-label="anchor" href="#method-sapp-"></a></h4>


<p>This regression simulation is from Sapp et al. (2014). There are 20
independent Gaussian random predictors with mean zero and a variance of 9.
The prediction equation is:</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="va">predictor_01</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">predictor_02</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">predictor_03</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="va">predictor_04</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">predictor_05</span> <span class="op">*</span> <span class="va">predictor_06</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">predictor_07</span> <span class="op">*</span> <span class="va">predictor_08</span> <span class="op">*</span> <span class="va">predictor_09</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">predictor_10</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> <span class="va">predictor_11</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">predictor_11</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">predictor_12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">predictor_13</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">predictor_14</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">predictor_15</span><span class="op">)</span> <span class="op">+</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">predictor_16</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> <span class="va">predictor_17</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">predictor_17</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">-</span></span>
<span>   <span class="fl">2</span> <span class="op">*</span> <span class="va">predictor_18</span> <span class="op">-</span> <span class="va">predictor_19</span> <span class="op">*</span> <span class="va">predictor_20</span></span></code></pre></div>

<p>The error is Gaussian with mean zero and variance 9.</p>
</div>

<div class="section">
<h4 id="method-sapp--1"><code>method = "sapp_2014_2"</code><a class="anchor" aria-label="anchor" href="#method-sapp--1"></a></h4>


<p>This regression simulation is also from Sapp et al. (2014). There are 200
independent Gaussian predictors with mean zero and variance 16. The
prediction equation has an intercept of one and identical linear effects of
<code>log(abs(predictor))</code>.</p>
<p>The error is Gaussian with mean zero and variance 25.</p>
</div>

<div class="section">
<h4 id="method-van-der-laan-"><code>method = "van_der_laan_2007_1"</code><a class="anchor" aria-label="anchor" href="#method-van-der-laan-"></a></h4>


<p>This is a regression simulation from van der Laan et al. (2007) with ten
random Bernoulli variables that have a 40% probability of being a value of
one. The true regression equation is:</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fl">2</span> <span class="op">*</span> <span class="va">predictor_01</span> <span class="op">*</span> <span class="va">predictor_10</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">predictor_02</span> <span class="op">*</span> <span class="va">predictor_07</span> <span class="op">+</span></span>
<span>    <span class="fl">3</span> <span class="op">*</span> <span class="va">predictor_04</span> <span class="op">*</span> <span class="va">predictor_05</span> <span class="op">-</span> <span class="fl">5</span> <span class="op">*</span> <span class="va">predictor_06</span> <span class="op">*</span> <span class="va">predictor_10</span> <span class="op">+</span></span>
<span>    <span class="fl">3</span> <span class="op">*</span> <span class="va">predictor_08</span> <span class="op">*</span> <span class="va">predictor_09</span> <span class="op">+</span> <span class="va">predictor_01</span> <span class="op">*</span> <span class="va">predictor_02</span> <span class="op">*</span> <span class="va">predictor_04</span> <span class="op">-</span></span>
<span>    <span class="fl">2</span> <span class="op">*</span> <span class="va">predictor_07</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">predictor_06</span><span class="op">)</span> <span class="op">*</span> <span class="va">predictor_02</span> <span class="op">*</span> <span class="va">predictor_09</span> <span class="op">-</span></span>
<span>    <span class="fl">4</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">predictor_10</span><span class="op">)</span> <span class="op">*</span> <span class="va">predictor_01</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">predictor_04</span><span class="op">)</span></span></code></pre></div>

<p>The error term is standard normal.</p>
</div>

<div class="section">
<h4 id="method-van-der-laan--1"><code>method = "van_der_laan_2007_2"</code><a class="anchor" aria-label="anchor" href="#method-van-der-laan--1"></a></h4>


<p>This is another regression simulation from van der Laan et al. (2007)  with
twenty Gaussians with mean zero and variance 16. The prediction equation is:</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="va">predictor_01</span> <span class="op">*</span> <span class="va">predictor_02</span> <span class="op">+</span> <span class="va">predictor_10</span><span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="va">predictor_03</span> <span class="op">*</span> <span class="va">predictor_17</span> <span class="op">-</span></span>
<span>    <span class="va">predictor_15</span> <span class="op">*</span> <span class="va">predictor_04</span> <span class="op">+</span> <span class="va">predictor_09</span> <span class="op">*</span> <span class="va">predictor_05</span> <span class="op">+</span> <span class="va">predictor_19</span> <span class="op">-</span></span>
<span>    <span class="va">predictor_20</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">predictor_09</span> <span class="op">*</span> <span class="va">predictor_08</span></span></code></pre></div>

<p>The error term is also Gaussian with mean zero and variance 16.</p>
</div>

<div class="section">
<h4 id="method-hooker-"><code>method = "hooker_2004"</code><a class="anchor" aria-label="anchor" href="#method-hooker-"></a></h4>


<p>Hooker (2004) and Sorokina <em>at al</em> (2008) used the following:</p>
<div class="sourceCode"><pre><code><span></span>
<span>    <span class="va">pi</span> <span class="op">^</span> <span class="op">(</span><span class="va">predictor_01</span> <span class="op">*</span> <span class="va">predictor_02</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">predictor_03</span> <span class="op">)</span> <span class="op">-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">asin</a></span><span class="op">(</span><span class="va">predictor_04</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">predictor_03</span>  <span class="op">+</span> <span class="va">predictor_05</span><span class="op">)</span> <span class="op">-</span></span>
<span>   <span class="op">(</span><span class="va">predictor_09</span> <span class="op">/</span> <span class="va">predictor_10</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span> <span class="op">(</span><span class="va">predictor_07</span> <span class="op">/</span> <span class="va">predictor_08</span><span class="op">)</span> <span class="op">-</span></span>
<span>    <span class="va">predictor_02</span> <span class="op">*</span> <span class="va">predictor_07</span></span></code></pre></div>

<p>Predictors 1, 2, 3, 6, 7, and 9 are standard uniform while the others are
uniform on <code>[0.6, 1.0]</code>. The errors are normal with mean zero and default
standard deviation of 0.25.</p>
</div>


</div>

<div class="section">
<h3 id="sim-noise-"><code>sim_noise()</code><a class="anchor" aria-label="anchor" href="#sim-noise-"></a></h3>


<p>This function simulates a number of random normal variables with mean zero.
The values can be independent if <code>cov_param = 0</code>. Otherwise the values are
multivariate normal with non-diagonal covariance matrices. For
<code>cov_type = "exchangeable"</code>, the structure has unit variances and covariances
of <code>cov_param</code>. With <code>cov_type = "toeplitz"</code>, the covariances have an
exponential pattern (see example below).</p>
</div>

<div class="section">
<h3 id="logistic-simulation">Logistic simulation<a class="anchor" aria-label="anchor" href="#logistic-simulation"></a></h3>


<p><code>sim_logistic()</code> provides a flexible interface to simulating a logistic
regression model with two multivariate normal variables <code>A</code> and <code>B</code> (with
zero mean, unit variances and correlation determined by the <code>correlation</code>
argument).</p>
<p>For example, using <code>eqn = A + B</code> would specify that the true probability of
the event was</p>
<div class="sourceCode"><pre><code><span></span>
<span>   <span class="va">prob</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">A</span> <span class="op">+</span> <span class="va">B</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>The class levels for the outcome column are <code>"one"</code> and <code>"two"</code>.</p>
</div>

<div class="section">
<h3 id="multinomial-simulation">Multinomial simulation<a class="anchor" aria-label="anchor" href="#multinomial-simulation"></a></h3>


<p><code>sim_multinomial()</code> can generate data with classes <code>"one"</code>, <code>"two"</code>, and
<code>"three"</code> based on the values in arguments <code>eqn_1</code>, <code>eqn_2</code>, and <code>eqn_3</code>,
respectfully. Like <code>sim_logistic()</code> these equations use predictors <code>A</code> and
<code>B</code>.</p>
<p>The individual equations are evaluated and exponentiated. After this, their
values are, for each row of data, normalized to add up to one. These
probabilities are them passed to <code><a href="https://rdrr.io/r/stats/Multinom.html" class="external-link">stats::rmultinom()</a></code> to generate the outcome
values.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Van der Laan, M. J., Polley, E. C., &amp; Hubbard, A. E. (2007). Super learner.
<em>Statistical applications in genetics and molecular biology</em>, 6(1).
DOI: 10.2202/1544-6115.1309.</p>
<p>Sapp, S., van der Laan, M. J., &amp; Canny, J. (2014). Subsemble: an ensemble
method for combining subset-specific algorithm fits. <em>Journal of applied
statistics</em>, 41(6), 1247-1259. DOI: 10.1080/02664763.2013.864263</p>
<p>Hooker, G. (2004, August). Discovering additive structure in black box
functions. In <em>Proceedings of the tenth ACM SIGKDD international conference
on Knowledge discovery and data mining</em> (pp. 575-580).
DOI: 10.1145/1014052.1014122</p>
<p>Sorokina, D., Caruana, R., Riedewald, M., &amp; Fink, D. (2008, July). Detecting
statistical interactions with additive groves of trees. In <em>Proceedings of
the 25th international conference on Machine learning</em> (pp. 1000-1007).
DOI: 10.1145/1390156.1390282</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sim_regression</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    outcome predictor_01 predictor_02 predictor_03 predictor_04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>    8.49       -<span style="color: #BB0000;">1.88</span>        -<span style="color: #BB0000;">1.86</span>        1.23          2.68 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>   19.3         0.551        0.126       5.07         -<span style="color: #BB0000;">3.14</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>   57.7        -<span style="color: #BB0000;">2.51</span>        -<span style="color: #BB0000;">2.73</span>        4.76          5.91 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>   -<span style="color: #BB0000;">8.41</span>        4.79         0.474      -<span style="color: #BB0000;">0.993</span>        -<span style="color: #BB0000;">1.15</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>   43.0         0.989       -<span style="color: #BB0000;">1.96</span>       -<span style="color: #BB0000;">6.86</span>          4.96 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>   72.3        -<span style="color: #BB0000;">2.46</span>         5.30        7.49          4.54 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>   -<span style="color: #BB0000;">3.36</span>        1.46         2.15        2.00          0.249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>   -<span style="color: #BB0000;">3.82</span>        2.21         2.73        1.62          1.70 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>   22.7         1.73         1.15       -<span style="color: #BB0000;">0.040</span><span style="color: #BB0000; text-decoration: underline;">2</span>       -<span style="color: #BB0000;">3.07</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>   25.7        -<span style="color: #BB0000;">0.916</span>        5.05        1.53          0.969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 16 more variables: predictor_05 &lt;dbl&gt;, predictor_06 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   predictor_07 &lt;dbl&gt;, predictor_08 &lt;dbl&gt;, predictor_09 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   predictor_10 &lt;dbl&gt;, predictor_11 &lt;dbl&gt;, predictor_12 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   predictor_13 &lt;dbl&gt;, predictor_14 &lt;dbl&gt;, predictor_15 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   predictor_16 &lt;dbl&gt;, predictor_17 &lt;dbl&gt;, predictor_18 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   predictor_19 &lt;dbl&gt;, predictor_20 &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="fu">sim_classification</span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 16</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    class  two_factor_1 two_factor_2 non_linear_1 non_linear_2 non_linear_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> class…      -<span style="color: #BB0000;">2.27</span>        -<span style="color: #BB0000;">1.18</span>         -<span style="color: #BB0000;">0.245</span>       0.888        0.354 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> class…      -<span style="color: #BB0000;">0.537</span>        0.420         0.621       0.170        0.374 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> class…       3.23         2.39          0.163       0.957        0.840 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> class…       3.42         0.236         0.110       0.788        0.134 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> class…       0.571       -<span style="color: #BB0000;">0.100</span>        -<span style="color: #BB0000;">0.487</span>       0.377        0.541 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> class…      -<span style="color: #BB0000;">1.61</span>        -<span style="color: #BB0000;">0.070</span><span style="color: #BB0000; text-decoration: underline;">1</span>        0.393       0.789        0.515 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> class…       2.74         2.51         -<span style="color: #BB0000;">0.751</span>       0.459        0.931 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> class…       0.076<span style="text-decoration: underline;">3</span>      -<span style="color: #BB0000;">0.679</span>         0.307       0.220        0.771 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> class…       0.059<span style="text-decoration: underline;">1</span>      -<span style="color: #BB0000;">2.35</span>          0.402       0.566        0.712 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> class…      -<span style="color: #BB0000;">1.39</span>        -<span style="color: #BB0000;">2.10</span>         -<span style="color: #BB0000;">0.887</span>       0.015<span style="text-decoration: underline;">4</span>       0.078<span style="text-decoration: underline;">4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 90 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 10 more variables: linear_01 &lt;dbl&gt;, linear_02 &lt;dbl&gt;, linear_03 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   linear_04 &lt;dbl&gt;, linear_05 &lt;dbl&gt;, linear_06 &lt;dbl&gt;, linear_07 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   linear_08 &lt;dbl&gt;, linear_09 &lt;dbl&gt;, linear_10 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flexible logistic regression simulation</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">is_installed</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">sim_logistic</span><span class="op">(</span><span class="fl">1000</span>, <span class="op">~</span> <span class="fl">.1</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">A</span> <span class="op">-</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">B</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">A</span> <span class="op">*</span><span class="va">B</span>, corr <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, col <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">f_xor</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">xor</a></span><span class="op">(</span><span class="va">A</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">B</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># or</span></span></span>
<span class="r-in"><span>  <span class="va">f_xor</span> <span class="op">&lt;-</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span><span class="fl">10</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">xor</a></span><span class="op">(</span><span class="va">A</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">B</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">sim_logistic</span><span class="op">(</span><span class="fl">1000</span>, <span class="va">f_xor</span>, keep_truth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">B</span>, col <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-plt img"><img src="sim_classification-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## How to use external symbols:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">a_coef</span> <span class="op">&lt;-</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="co"># splice the value in using rlang's !! operator</span></span></span>
<span class="r-in"><span><span class="va">lp_eqn</span> <span class="op">&lt;-</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/expr.html" class="external-link">expr</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="va">a_coef</span> <span class="op">*</span> <span class="va">A</span><span class="op">+</span><span class="va">B</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lp_eqn</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 * A + B</span>
<span class="r-in"><span><span class="fu">sim_logistic</span><span class="op">(</span><span class="fl">5</span>, <span class="va">lp_eqn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        A       B class</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> -<span style="color: #BB0000;">0.315</span>  0.990  one  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  0.964 -<span style="color: #BB0000;">0.066</span><span style="color: #BB0000; text-decoration: underline;">4</span> one  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  1.16   0.258  one  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>  1.09  -<span style="color: #BB0000;">0.621</span>  one  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>  2.65  -<span style="color: #BB0000;">0.776</span>  one  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Flexible multinomial regression simulation</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">is_installed</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

